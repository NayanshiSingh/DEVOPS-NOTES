Kubernetes Basics & Networking â€” One-Page Summary
1ï¸âƒ£ Kubernetes Core Basics
ğŸ”¹ API Server

Central control plane component

Exposes REST APIs

Backed by etcd (cluster state store)

Everything in Kubernetes is an API call

Entry point for kubectl, controllers, and nodes

ğŸ”¹ Controllers (Reconciliation Loop)

Continuously ensure:
Desired State = Actual State

Watch API server for changes

Take corrective action if mismatch exists

Example Flow

Scheduler assigns Pods â†’ Nodes

kubelet configures container runtime & networking

ğŸ”¹ Pods

Smallest deployable unit

One or more containers

Containers in a Pod share:

Same IP

Same localhost

Same ports

Shared volumes

ğŸ”¹ Nodes

Worker machines (VMs or bare metal)

Run:

kubelet

kube-proxy

Container runtime (containerd / CRI-O)

2ï¸âƒ£ Kubernetes Networking Model (Design Rules)

Kubernetes enforces 3 strict rules:

Pod â†” Pod communication without NAT

Node â†” Pod communication without NAT

Pod IP is the same inside & outside the Pod

Therefore Kubernetes must support:

Container-to-Container

Pod-to-Pod

Pod-to-Service

Internet-to-Service

3ï¸âƒ£ Container-to-Container Networking (Inside a Pod)

Containers share one network namespace

Provided by Linux namespaces

Shared:

IP

Ports

Loopback

Communication via localhost

4ï¸âƒ£ Pod-to-Pod Networking
ğŸ”¹ Same Node Communication

Each Pod gets its own network namespace

Connected using veth pairs

Flow:

Pod eth0 â†’ veth â†’ Linux bridge â†’ veth â†’ Pod eth0


Bridge uses ARP to find destination Pod

ğŸ”¹ Different Node Communication

Each node has a Pod CIDR

Node1: 10.0.1.0/24

Node2: 10.0.2.0/24

Flow

Pod â†’ veth â†’ bridge

Bridge routes via node interface (eth0)

Packet sent to destination node

Destination routes to Pod via veth

ğŸ”¹ CNI (Who manages this?)

CNI plugins manage Pod IP routing

Examples

AWS VPC CNI â†’ Pods get real VPC IPs (no overlay)

Calico / Flannel / Weave â†’ Overlay or BGP-based networking

5ï¸âƒ£ Pod-to-Service Networking (ClusterIP)
ğŸ”¹ Why Services Exist

Pod IPs are ephemeral

Services provide:

Stable virtual IP

Internal load balancing

ğŸ”¹ Service Traffic Routing
Aï¸âƒ£ iptables Mode

kube-proxy programs iptables rules

Packets to Service IP:

Random backend Pod selected

DNAT â†’ Pod IP

Return traffic handled via conntrack (SNAT)

Bï¸âƒ£ IPVS Mode (Modern Default)

Kernel-level load balancing

Faster & scalable

Uses dummy interfaces for Service IPs

ğŸ”¹ DNS (CoreDNS)

Every Service gets a DNS name:

service.namespace.svc.cluster.local


CoreDNS runs as a Pod inside the cluster

6ï¸âƒ£ Internet-to-Service Networking
ğŸ”¹ Egress (Pod â†’ Internet)

Problem

Internet Gateway doesnâ€™t know Pod IPs

Solution

iptables SNAT:

Pod IP â†’ Node IP

Cloud NAT:

Node private IP â†’ public IP

ğŸ”¹ Ingress (Internet â†’ Pods)
Option 1ï¸âƒ£ Service Type = LoadBalancer (L4)

Cloud LB created automatically

Traffic flow:

Internet â†’ Cloud LB â†’ NodePort â†’ Pods


Best for TCP/UDP services

Option 2ï¸âƒ£ Ingress Controller (L7)

Examples

NGINX

AWS ALB Ingress

Traefik

Istio Gateway

Features

Host-based routing

Path-based routing

HTTP/HTTPS termination